<html>
<head>
	<title>Опции теплового насоса. Народный контроллер ТН</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type='text/javascript' src='scripts.js'></script>
	<script type="text/javascript">
		window.onload = function() {
		loadParam("get_optionHP(ADD_HEAT),get_optionHP(SD_CARD),get_presentRelay(RHEAT),get_optionHP(TEMP_RHEAT),get_optionHP(PUMP_WORK),get_optionHP(PUMP_PAUSE),get_optionHP(ATTEMPT),get_optionHP(ADD_HEAT),get_optionHP(BEEP),get_optionHP(NXT),get_optionHP(NXTS),get_optionHP(NXTD),get_optionHP(NXTW),get_optionHP(SCG),get_optionHP(SCGT),get_optionHP(WSPIF)");
		loadParam("get_optionHP(DELAY_ON_PUMP),get_optionHP(DELAY_OFF_PUMP),get_optionHP(DELAY_START_RES),get_optionHP(DELAY_REPEAD_START),get_optionHP(DELAY_TRV),get_optionHP(),get_optionHP(DELAY_BOILER_SW),get_optionHP(DELAY_BOILER_OFF),get_optionHP(SDM_LOGER),get_optionHP(TEMP_EVI),get_optionHP(TIME_CHART),get_optionHP(SAVE_ON),get_optionHP(SGL1W_2),get_optionHP(SGL1W_3),get_optionHP(SGL1W_4)");
	}; 
	</script>
</head>
<body class="test">
<div id="menu" class="menu"><script src='menu.js'></script></div>
<div class="content">
	<h1>Опции теплового насоса <input type="submit" value="Записать в EEPROM"  onclick='loadParam("set_SAVE")'></h1>
	<div class="row1">
		<table>
		<thead>
		<tr>
			<th>Описание</th>
			<th>Значение</th>
		</tr>
		</thead>			
		<tbody>
		<tr>
			<td>Расположение файлов веб-сервера на SPI Flash (иначе на SD карте)</td>
			<td>
				<input type="checkbox" id="get_optionhp-wspif" onChange="setParam('get_optionHP(WSPIF)');">
			</td>
		</tr>
		<tr>
			<td>Сохранение состояния ТН в ЕЕПРОМ, для восстановления его после сброса</td>
			<td>
				<input type="checkbox" id="get_optionhp-save_on" onChange="setParam('get_optionHP(SAVE_ON)');">
			</td>
		</tr>
			<td>Число повторных попыток пуска при ошибке [0..10]<sup>1</sup></td>
			<td nowrap>
				<input id="get_optionhp-attempt" type="number" min="0" max="9999" step="1" value="0">
				<input id="get_optionhp-attempt2" type="submit" value=">"  onclick="setParam('get_optionHP(ATTEMPT)');">
			</td>
		</tr>

		<tr>
			<td><b>Настройка встроенных графиков</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Период накопления графиков <sup>2</sup></td>
			<td>
				<select id="get_optionhp-time_chart" onChange="setParam('get_optionHP(TIME_CHART)','get_optionhp-time_chart');"></select>
			</td>
		</tr>
		<tr>
			<td>Запись графиков на карту (файл chart_sd.csv)<sup>3</sup></td>
			<td>
				<input type="checkbox" id="get_optionhp-sd_card" onChange="setParam('get_optionHP(SD_CARD)');">
			</td>
		</tr>
		<tr>

		<tr>
			<td><b>Настройки контура отопления</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Использование дополнительного ТЭНа при нагреве отопления<sup>4</sup></td>
			<td>
				<select id="get_optionhp-add_heat" onchange="setParam('get_optionHP(ADD_HEAT)','get_optionhp-add_heat');"></select>
			</td>
		</tr>
		<tr>
			<td>Температура для управления дополнительным ТЭНом °C [-30..30]</td>
			<td nowrap>
				<input id="get_optionhp-temp_rheat" type="number" min="-30" max="30" step="0.1" value="0">
				<input id="get_optionhp-temp_rheat2" type="submit" value=">"  onclick="setParam('get_optionHP(TEMP_RHEAT)');">
			</td>
		</tr>
		<tr>
			<td>Работа насосов отопления, когда ТН в паузе (сек.) [0..65535] <sup>5</sup></td>
			<td nowrap>
				<input id="get_optionhp-pump_work" type="number" min="0" step="1" value="0">
				<input id="get_optionhp-pump_work2" type="submit" value=">"  onclick="setParam('get_optionHP(PUMP_WORK)');">
			</td>
		</tr>
		<tr>
			<td> Период останова насосов отопления в паузе ТН (сек.) [0..65535] <sup>6</sup></td>
			<td nowrap>
				<input id="get_optionhp-pump_pause" type="number" min="0" step="1" value="0">
				<input id="get_optionhp-pump_pause2" type="submit" value=">"  onclick="setParam('get_optionHP(PUMP_PAUSE)');">
			</td>
		</tr>
		<tr>
			<td>Использовать Солнечный Коллектор для регенерации геоконтура в простое</td>
			<td>
				<input type="checkbox" id="get_optionhp-scg" onchange="setParam('get_optionHP(SCG)');" >
			</td>
		</tr>	
		<tr>
			<td>Температура начала регенерации геоконтура с помощью СК (+2°)</td>
			<td nowrap>
				<input type="number" id="get_optionhp-scgt"> <input type="submit" value=">" onclick="setParam('get_optionHP(SCGT)');" >
			</td>
		</tr>	
		<tr>
			<td><b>Времена и задержки</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Задержка включения компрессора после включения насосов (сек.) [0...900]</td>
			<td nowrap>
				<input type="number" id="get_optionhp-delay_on_pump">
				<input type="submit" value=">" onclick="setParam('get_optionHP(DELAY_ON_PUMP)');" >
			</td>
		</tr>	
		<tr>
			<td>Задержка выключения насосов после выключения компрессора (сек.) [0...900]</td>
			<td nowrap>
				<input type="number" id="get_optionhp-delay_off_pump"> <input type="submit" value=">" onclick="setParam('get_optionHP(DELAY_OFF_PUMP)');" >
			</td>
		</tr>	
		<tr>
			<td>Задержка включения ТН после внезапного сброса контроллера (сек.) [0...6000]</td>
			<td nowrap>
				<input type="number" id="get_optionhp-delay_start_res"> <input type="submit" value=">" onclick="setParam('get_optionHP(DELAY_START_RES)');" >
			</td>
		</tr>	
		<tr>
			<td>Задержка перед повторным включениме ТН при ошибке (попытки пуска) (сек.) [0...6000]</td>
			<td nowrap>
				<input type="number" id="get_optionhp-delay_repead_start"> <input type="submit" value=">" onclick="setParam('get_optionHP(DELAY_REPEAD_START)');" >
			</td>
		</tr>	
		<tr>
			<td>Задержка между переключением реверсивного клапана и включением компрессора (сек.) [0...600]</td>
			<td nowrap>
				<input type="number" id="get_optionhp-delay_trv"> <input type="submit" value=">" onclick="setParam('get_optionHP(DELAY_TRV)');" >
			</td>
		</tr>	
		<tr>
			<td>Пауза после переключение ГВС (сек.) [0...1200]</td>
			<td nowrap>
				<input type="number" id="get_optionhp-delay_boiler_sw"> <input type="submit" value=">" onclick="setParam('get_optionHP(DELAY_BOILER_SW)');" >
			</td>
		</tr>	
		<tr>
			<td>Время на сколько блокируются защиты при переходе с ГВС на отопление (сек.) [0...1200]</td>
			<td nowrap>
				<input type="number" id="get_optionhp-delay_boiler_off"> <input type="submit" value=">" onclick="setParam('get_optionHP(DELAY_BOILER_OFF)');" >
			</td>
		</tr>

		<tr>
			<td><b>Дополнительное оборудование</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Логировать не критичные ошибки электро-счетчика SDM</td>
			<td>
				<input type="checkbox" id="get_optionhp-sdm_loger" onchange="setParam('get_optionHP(SDM_LOGER)');" >
			</td>
		</tr>	
		<tr>
			<td>Генерация звукового сигнала</td>
			<td>
				<input type="checkbox" id="get_optionhp-beep" onchange="setParam('get_optionHP(BEEP)');" >
			</td>
		</tr>					
		<tr>
			<td>Использование дисплея Nextion</td>
			<td>
				<input type="checkbox" id="get_optionhp-nxt" onchange="setParam('get_optionHP(NXT)');" >
			</td>
		</tr>	
		<tr>
			<td>Включать дисплей при пуске компрессора</td>
			<td>
				<input type="checkbox" id="get_optionhp-nxtw" onchange="setParam('get_optionHP(NXTW)');" >
			</td>
		</tr>	
		<tr>
			<td>Время засыпания дисплея Nextion (мин.) [0..255] <sup>7</sup></td>
			<td nowrap>
				<input id="get_optionhp-nxts" type="number" min="0" step="1" value="0">
				<input type="submit" value=">"  onclick="setParam('get_optionHP(NXTS)');">
			</td>
		</tr>
		<tr>
			<td>Яркость дисплея Nextion в % [1..100]</td>
			<td nowrap>
				<input id="get_optionhp-nxtd" type="number" min="1" max="100" step="1" value="100">
				<input type="submit" value=">"  onclick="setParam('get_optionHP(NXTD)');">
			</td>
		</tr>
		<tr>
			<td>На второй шине 1-Wire только один датчик температуры</td>
			<td>
				<input type="checkbox" id="get_optionhp-sgl1w_2" onchange="setParam('get_optionHP(SGL1W_2)');" >
			</td>
		</tr>	
		<tr>
			<td>На третей шине 1-Wire только один датчик температуры</td>
			<td>
				<input type="checkbox" id="get_optionhp-sgl1w_3" onchange="setParam('get_optionHP(SGL1W_3)');" >
			</td>
		</tr>	
		<tr>
			<td>На четвертой шине 1-Wire только один датчик температуры</td>
			<td>
				<input type="checkbox" id="get_optionhp-sgl1w_4" onchange="setParam('get_optionHP(SGL1W_4)');" >
			</td>
		</tr>	

	</tbody>
	</table>

	1. 0 - Повторный пуск при ошибке не производится<br/>
	2. При изменении периода графики обнуляются.<br/>
	3. Использование этой опции может привести к повреждению фаловой системы карты<br/>
	4. Reserve - ТЭН включается если температура в доме ниже заданной, bivalent - ТЭН включится если уличная температуа ниже заданной<br/>
	5. Установка 0 - насос вообще не работает<br/>
	6. Установка 0 - насос работает непрерывно<br/>
	7. 0 - дисплей Nextion не выключается<br/>
	<br>
	<input type="submit" value="Сброс настроек HP" onclick='if(document.getElementById("reset_code").value=="RESET") loadParam("RESET_SETTINGS");'> Введите RESET: <input id="reset_code" size="7">
</div>	
</div>
</body>
</html>
