
<html>
<head>
  <title>Датчики. Народный контроллер ТН</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type='text/javascript' src='scripts.js'></script>
  <script type="text/javascript">
    window.onload = function() {
    loadParam("get_listInput");
    loadParam("get_listPress");
    loadParam("get_listFlow");
loadParam("get_SDM(NAME_SDM),get_SDM(NOTE_SDM),get_SDM(VOLTAGE_SDM),get_SDM(CURRENT_SDM),get_SDM(REPOWER_SDM),get_SDM(ACPOWER_SDM),get_SDM(POWER_SDM),get_SDM(POW_FACTOR_SDM),get_SDM(PHASE_SDM),get_SDM(ACENERGY_SDM),get_SDM(REENERGY_SDM),get_SDM(LINK_SDM),get_SDM(MAX_VOLTAGE_SDM),get_SDM(MIN_VOLTAGE_SDM),get_SDM(MAX_POWER_SDM),get_SDM(ENERGY_SDM)");
updateParam("get_SDM(VOLTAGE_SDM),get_SDM(CURRENT_SDM),get_SDM(REPOWER_SDM),get_SDM(ACPOWER_SDM),get_SDM(POWER_SDM),get_SDM(POW_FACTOR_SDM),get_SDM(PHASE_SDM),get_SDM(ACENERGY_SDM),get_SDM(REENERGY_SDM),get_SDM(LINK_SDM),get_SDM(ENERGY_SDM)");                      
    };
  </script>
</head>
<body  class="sensorsp">
<div id="menu" class="menu"><script src="menu.js"></script></div>
<div class="content">
  <h1>Датчики (кроме датчиков температуры)<input type="submit" value="Записать в EEPROM"  onclick='loadParam("set_SAVE")'></h1>

<div class="row1">
<h2>Частотные датчики</h2>
<table>
	<thead>
	<tr>
		<th>Имя</th>
		<th>Описание</th>
		<th>Значение</th>
		<th>Минимум</th>
		<th>Коэфф, имп*л</th>
		<th>Теплоемкость, Дж/(кг*град)</th>
		<th>Частота</th>
		<th>Тест</th>
		<th>Пин</th>
		<th>Код ошибки</th>
	</tr>
	</thead>
	<tbody id="get_listflow">
	</tbody>
</table>            
</div>       

<div class="row1">
  <h2>Аналоговые датчики</h2>
    <table>
    <thead>
    <tr>
      <th>Имя</th>
      <th>Описание</th>
      <th>Значение</th>
      <th>Минимум</th>
      <th>Максимум</th>
      <th>"0" датчика</th>
      <th>Коэффициент</th>
      <th>Тест</th>
      <th>Pin</th>
      <th>ADC</th>
      <th>Код ошибки</th>
    </tr>
    </thead>
    <tbody id="get_listpress2"></tbody>
  </table> 
  <h3 style="">Калькулятор коэффициентов аналоговых датчиков <input style="float:right" type="submit" value="Расчёт коэффициентов"  onclick="toggletable('pcalc');"></h3>
    <table id="pcalc" style="display:none;">
    <thead>
    <tr>
      <th> </th>
      <th>АЦП [отсчеты]</th>
      <th>Манометрическое давление [бар]</th>
      <th> </th>
      <th>Результат вычислений</th>
      <th>Установить для:</th>
    </tr>
    <tbody> 
      <tr>
        <td>Точка 1</td>
        <td><input id="a1" type="number" min="0" max="4095" step="1" value="0"></td>
        <td><input id="p1" type="number" min="0" max="100" step="0.01" value="0"></td>
        <td rowspan="2"><input type="submit" value="Рассчитать коэффициенты"  onclick="calcacp();"></td>
        <td>"0" датчика: <span id="k1"></span></td>
        <td rowspan="2"><select id="get_listpress" onChange="setKanalog();"><option value="-" class="">--</option></select></td>
      </tr>
      <tr>
        <td>Точка 2</td>
        <td><input id="a2" type="number" min="0" max="4095" step="1" value="2500"></td>
        <td><input id="p2" type="number" min="0" max="100" step="0.01" value="12"></td>
        <td>Коэффициент: <span id="k2"></span></td>
      </tr>     
    </tbody>
    </table>
</div>  
<div class="row1">
    <h2>Датчики сухой контакт</h2>
    <table>
    <thead>
    <tr>
      <th>Имя</th>
      <th>Описание</th>
      <th>Значение</th>
      <th>Состояние в режиме аварии</th>
      <th>Тест</th>
      <th>Pin</th>
      <th>Тип</th>
      <th>Код ошибки</th>
    </tr>
    </thead>
    <tbody id="get_listinput">
    </tbody>
  </table>            
  </div>
  
  <div class="row1">
    <h2>Электрический счётчик с MODBUS "SDM120" <input type="submit" value="Программирование (2)"  onclick='loadParam("settingSDM")'  style="float:right;"> <input type="submit" value="Восстановление связи (1) "  onclick='loadParam("uplinkSDM")'  style="float:right;margin-right:10px;"> </h2>
    <table>
    <thead>
    <tr>
      <th>Напряжение (V)</th>
      <th>Ток (А)</th>
      <th>Реактивная мощность (W)</th>
      <th>Активная мощность (W)</th>
      <th>Полная мощность (W)</th>
      <th>Коэффициент мощности (cos φ)</th>
      <th>Активная энергия (kW/h)</th>
      <th>Реактивная энергия (kW/h)</th>
      <th>Полная энергия (kW/h)</th>
      <th>Связь с SDM120</th>
    </tr>
    <tr>
        <td id="get_sdm-voltage_sdm"></td>
        <td id="get_sdm-current_sdm"></td>
        <td id="get_sdm-repower_sdm"></td>
        <td id="get_sdm-acpower_sdm"></td>
        <td id="get_sdm-power_sdm"></td>
        <td id="get_sdm-pow_factor_sdm"></td>
        <td id="get_sdm-acenergy_sdm"></td>
        <td id="get_sdm-reenergy_sdm"></td>
        <td id="get_sdm-energy_sdm"></td>
        <td id="get_sdm-link_sdm"></td>
      </tr>
    </thead>
  </table>
</div>    
  
  <div class="row1">
    <h2>Защиты по входному напряжению</h2>
    <table>
    <thead>
    <tr>
      <th>Максимальное напряжения<sup>3</sup> [0...400] (V)</th>
      <th>Минимальное напряжения<sup>4</sup> [0...400] (V)</th>
      <th>Контроль мощности<sup>4</sup> [0...10000] (W)</th>      
    </tr>
    <tr>
    <td nowrap><input id="get_sdm-max_voltage_sdm" type="number" min="0" max="400" step="1" value=""><input type="submit" value=">"  onclick="setParam('get_SDM(MAX_VOLTAGE_SDM)');"></td>
    <td nowrap><input id="get_sdm-min_voltage_sdm" type="number" min="0" max="400" step="1" value=""><input type="submit" value=">"  onclick="setParam('get_SDM(MIN_VOLTAGE_SDM)');"></td>
    <td nowrap><input id="get_sdm-max_power_sdm" type="number" min="0" max="10000" step="1" value=""><input type="submit" value=">"  onclick="setParam('get_SDM(MAX_POWER_SDM)');"></td>
    </tr>  
    </thead>
    </table>
    <br><br>
    <p>1. При нажатии кнопки флаг сбоя связи сбрасывается и делается попытка прочитать данные со счетчика.</p>
	<p>2. Производится установка параметров связи счетчика под требуемые. Перед нажатием необходимо перевести счетчик в режим программирования (долгое нажате на кнопку, надпись  Set на экране). После этой операции счетчик надо сбросить (выключить питание).</p>  
  	<p>3. При выполнении условия, ТН останавливается по ошибке.</p>
    <p>4. При выполнении условия, ТН не останавливается, генерируется уведомление.</p>
  </div> 
</div>
</body>
</html>
