<html>
<head>
	<title>ГВС. Народный контроллер ТН</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="style.css">
	<style>
	#feedback { font-size: 1.4em; }
	#calendar .ui-selecting { background: #FECA40; }
	#calendar .ui-selected { background: #F39814; }
	#calendar { margin: 0; padding: 0; width: 750; }
	#calendar td.clc { margin: 3px; padding: 1px; text-align: center; color: red; border: 1px dotted black; }
	#calendar td.clh { background: #F7F7F7; }
	</style>
	<script src="jquery.min.js"></script>
	<script src="jquery-ui.min.js"></script>
	<script src="jquery.ui.touch.js"></script>
	<script>
		window.calendar_act_chr = "&#9899";
//		var ResetHeights = navigator.userAgent.indexOf("Chrome") != -1;
		var shifted;
		$( function() { $("#calendar").selectable({filter: ".clc", stop: function() {
			$( ".ui-selected", this ).each(function() {
				this.innerHTML = shifted ? "" : window.calendar_act_chr;
			});
//			if(ResetHeights) {
//				var arrdiv = [".content",".menu"];
//				for(i = 0; i < arrdiv.length; i++) $(arrdiv[i])[0].style.minHeight = "100%";
//			}
		} }); });
		$(document).on('keyup keydown', function(e){ shifted = e.shiftKey } );
	</script>
	<script type='text/javascript' src='scripts.js'></script>
	<script type="text/javascript">
		window.onload = function() {
			loadParam("get_Boiler(RESET_HEAT),get_Boiler(RESET_TIME),get_Boiler(CIRCUL_PAUSE),get_Boiler(CIRCUL_WORK),get_Boiler(TEMP_MAX),get_Boiler(PAUSE1),get_Boiler(BOILER_ON),get_Boiler(SCH_ON),get_Boiler(SCH_AH),get_Boiler(ADD_HEATING),get_Boiler(SALLMONELA),get_Boiler(CIRCULATION),get_Boiler(DTARGET_DAY),get_Boiler(DTARGET),get_Boiler(TEMP_TARGET),get_Boiler(BOIL_TEMP),get_Boiler(BOIL_DIF),get_Boiler(BOIL_IN),get_Boiler(BOIL_PRO),get_Boiler(BOIL_TIME),get_Boiler(TEMP_RBOILER),get_Boiler(ADD_BOILER),get_Boiler(TURBO_BOILER)");
			loadParam("get_Boiler(ADT),get_Boiler(ADH),get_Boiler(ADEH),get_Boiler(SCHEDULER)");
	};
	</script>
</head>
<body class="test">
<div id="menu" class="menu"><script src="menu.js"></script></div>
<div class="content">
	<div class="row1">
	<h1>Горячее водоснабжение<input type="submit" value="Записать в EEPROM"  onclick='loadParam("set_SAVE")'></h1>
	</div>
		<h2>Параметры ГВС</h2>
		<table>
		<thead>
		<tr>
			<th>Параметр</th>
			<th>Значение</th>
		</tr>
		</thead>			
		<tbody>
		<tr>
			<td>Включение нагрева бойлера</td>
			<td><input type="checkbox" name="get_boiler-boiler_on" id="get_boiler-boiler_on" onChange="setParam('get_Boiler(BOILER_ON)');" ></td>
		</tr>
		<tr>
			<td>Целевая температура бойлера °C [5...90]</td>
			<td><input id="get_boiler-temp_target" type="number" min="5" max="90" step="0.1" value="40"><input id="get_boiler-temp_target2" type="submit" value=">"  onclick="setParam('get_Boiler(TEMP_TARGET)');"></td>
		</tr>
		<tr>
			<td>Гистерезис целевой температуры °C [1...20]<sup>1</sup></td>
			<td><input id="get_boiler-dtarget" type="number" min="0" max="20" step="0.1" value="10"><input id="get_boiler-dtarget2" type="submit" value=">"  onclick="setParam('get_Boiler(DTARGET)');"></td>
		</tr>
		<tr>
			<td><b>Использование ночного тарифа</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Добавка к целевой температуре по часам C° [-50...50]<sup>2</sup></td>
			<td><input id="get_boiler-adt" type="number" step="1"><input type="submit" value=">" onclick="setParam('get_Boiler(ADT)');"></td>
		</tr>
		<tr>
			<td>Начальный час добавки к целевой температуре [0...23]</td>
			<td><input id="get_boiler-adh" type="number" min="0" max="23" step="1"><input type="submit" value=">" onclick="setParam('get_Boiler(ADH)');"></td>
		</tr>
		<tr>
			<td>Конечный час добавки к целевой температуре [0...23]</td>
			<td><input id="get_boiler-adeh" type="number" min="0" max="23" step="1"><input type="submit" value=">" onclick="setParam('get_Boiler(ADEH)');"></td>
		</tr>
		<tr>
			<td><b>Встроенный ТЭН</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Ускоренный нагрев бойлера<sup>3</sup></td>
			<td><input type="checkbox" name="get_boiler-turbo_boiler" id="get_boiler-turbo_boiler" onChange="setParam('get_Boiler(TURBO_BOILER)');" ></td>
		</tr>
		<tr>
			<td>Использование ТЭНа для догрева бойлера<sup>4</sup></td>
			<td>
				<input id="get_boiler-add_heating" type="checkbox" onchange="setParam('get_Boiler(ADD_HEATING)','get_boiler-add_heating');">
			</td>
		</tr>
		<tr>
			<td>Температура догрева бойлера (при которой выключается нагрев ТН и включается ТЭН бойлера) °C [0...60]</td>
			<td>
				<input id="get_boiler-temp_rboiler" type="number" min="0" max="60" step="0.1" value="0">
				<input id="get_boiler-temp_rboiler2" type="submit" value=">"  onclick="setParam('get_Boiler(TEMP_RBOILER)');">
			</td>
		</tr>
		<tr>
			<td><b>ПИД</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Целевая температура подачи °C [30..70]</td>
			<td><input id="get_boiler-boil_temp" type="number" min="30" max="70" step="0.1" value="0"><input id="get_boiler-boil_temp2" type="submit" value=">"  onclick="setParam('get_Boiler(BOIL_TEMP)');"></td>
		</tr>
		<tr>
			<td>Постоянная интегрирования времени (сек.) [5..300]</td>
			<td><input id="get_boiler-boil_time" type="number" min="5" max="300" step="1" value="0"><input id="get_boiler-boil_time2" type="submit" value=">"  onclick="setParam('get_Boiler(BOIL_TIME)');"></td>
		</tr>
		<tr>
			<td>Пропорциональная составляющая [0..100]</td>
			<td><input id="get_boiler-boil_pro" type="number" min="0" max="100" step="1" value="0"><input id="get_boiler-boil_pro2" type="submit" value=">"  onclick="setParam('get_Boiler(BOIL_PRO)');"></td>
		</tr>
		<tr>
			<td>Интегральная составляющая [0..20]</td>
			<td><input id="get_boiler-boil_in" type="number" min="0" max="20" step="1" value="0"><input id="get_boiler-boil_in2" type="submit" value=">"  onclick="setParam('get_Boiler(BOIL_IN)');"></td>
		</tr>
		<tr>
			<td>Дифференциальная составляющая [0..10]</td>
			<td><input id="get_boiler-boil_dif" type="number" min="0" max="10" step="1" value="0"><input id="get_boiler-boil_dif2" type="submit" value=">"  onclick="setParam('get_Boiler(BOIL_DIF)');"></td>
		</tr>
		<tr>
			<td><b>Опции</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Работа по расписанию</td>
			<td><input type="checkbox" name="get_boiler-sch_on" id="get_boiler-sch_on" onChange="setParam('get_Boiler(SCH_ON)');" ></td>
		</tr>
		<tr>
			<td>Работа по расписанию только для ТЭНа</td>
			<td><input type="checkbox" name="get_boiler-sch_ah" id="get_boiler-sch_ah" onChange="setParam('get_Boiler(SCH_AH)');" ></td>
		</tr>
		<tr>
			<td>Профилактика сальмонеллы (1 раз в неделю)</td>
			<td><input type="checkbox" name="get_boiler-sallmonela" id="get_boiler-sallmonela" onChange="setParam('get_Boiler(SALLMONELA)');" ></td>
		</tr>
		<tr>
			<td>Управление циркуляционным насосом ГВС<sup>5</sup></td>
			<td><input type="checkbox" name="get_boiler-circulation" id="get_boiler-circulation" onChange="setParam('get_Boiler(CIRCULATION)');" ></td>
		</tr>
		<tr>
			<td>Время работы циркуляционного насоса ГВС (мин.) [0...60]<sup>6</sup></td>
			<td><input id="get_boiler-circul_work" type="number" min="0" max="60" step="1" value=""><input id="get_boiler-circul_work2" type="submit" value=">"  onclick="setParam('get_Boiler(CIRCUL_WORK)');"></td>
		</tr>
		<tr>
			<td>Пауза между включениями насоса циркуляции (мин.) [0...60]<sup>7</sup></td>
			<td><input id="get_boiler-circul_pause" type="number" min="0" max="60" step="1" value=""><input id="get_boiler-circul_pause2" type="submit" value=">"  onclick="setParam('get_Boiler(CIRCUL_PAUSE)');"></td>
		</tr>
		<tr>
			<td>При нагреве бойлера сбрасывать "избыточное" тепло систему отопления<sup>8</sup> </td>
			<td><input type="checkbox" name="get_boiler-reset_heat" id="get_boiler-reset_heat" onChange="setParam('get_Boiler(RESET_HEAT)');" ></td>
		</tr>
		<tr>
			<td>Время сброса тепла (сек.) [1..10000]</td>
			<td><input id="get_boiler-reset_time" type="number" min="1" max="10000" step="1" value=""><input id="get_boiler-reset_time2" type="submit" value=">"  onclick="setParam('get_Boiler(RESET_TIME)');"></td>
		</tr>
		<tr>
			<td><b>Защиты при работе теплового насоса</b></td>
			<td></td>
		</tr>
		<tr>
			<td>Максимальная температура подачи °C [20..70]</td>
			<td><input id="get_boiler-temp_max" type="number" min="20" max="70" step="0.1" value="20"><input id="get_boiler-temp_max2" type="submit" value=">"  onclick="setParam('get_Boiler(TEMP_MAX)');"></td>
		</tr>
		<tr>
			<td>Минимальное время «простоя» компрессора ТН перед включением (мин.) [0..60]</td>
			<td><input id="get_boiler-pause1" type="number" min="0" max="60" step="1"><input id="get_boiler-pause12" type="submit" value=">"  onclick="setParam('get_Boiler(PAUSE1)');"></td>
		</tr>
	</tbody>
	</table>
1. Диапазон регулирования равен: Целевая температура - Гистерезис целевой температуры.<br/>
2. При установке значения добавки 0 °C данная опция не работает.<br/>
3. Одновременно с нагревом бойлера включается ТЭН (параллельная работа), это уменьшает время нагрева, раздельный нагрев ТН и ТЭНом блокируется.<br/>
4. Двух-ступенчатый нагрев бойлера. ТН греет бойлер до температуры догрева, далее до целевой температуры греет ТЭН.<br/>
5. Управление циркуляцией в системе ГВС (если есть контур циркуляции).<br/>
6. Если установить 0-насос циркуляции ГВС вообще не работает.<br/>
7. Если установить 0-насос циркуляции ГВС работает непрерывно.<br/>
8. Переключение 3-х ходового крана на отопление при достижение максимальной температуры подачи - 1 градус.
<br><br>
<h2>Расписание</h2>
<table id="calendar">
	<thead>
		<tr>
			<th>Дни</th>
			<th colspan="24" align="center">Часы</th>
		</tr>
		<tr>
			<th></th>
			<th>00</th><th>01</th><th>02</th><th>03</th><th>04</th><th>05</th><th>06</th><th>07</th><th>08</th><th>09</th><th>10</th><th>11</th>
			<th>12</th><th>13</th><th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="clh">Понедельник</td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
		</tr>
		<tr>
			<td class="clh">Вторник</td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
		</tr>
		<tr>
			<td class="clh">Среда</td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
		</tr>
		<tr>
			<td class="clh">Четверг</td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
		</tr>
		<tr>
			<td class="clh">Пятница</td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
		</tr>
		<tr>
			<td class="clh">Суббота</td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
		</tr>
		<tr>
			<td class="clh">Воскресение</td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
			<td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td><td class="clc"></td>
		</tr>
	</tbody>
</table>
<br>
<input type="submit" value="Сохранить расписание" onClick="setParam('get_Boiler(SCHEDULER)');">
<br><br>
Левая кнопка мыши - установить, с клавишой SHIFT - очистить. 
</div>
</body>
</html>
